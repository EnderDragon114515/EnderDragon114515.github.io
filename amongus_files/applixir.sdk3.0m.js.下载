var rewardedSlot,iframeSource,googletag,startMode=3,rewardComplete=!1,rewardedSlotClosed=!0,scriptTag=document.createElement("script");scriptTag.src="https://securepubads.g.doubleclick.net/tag/js/gpt.js",scriptTag.async=!0,document.head.appendChild(scriptTag);const initApplixirVideoUnit=e=>{e.verbosity>3&&console.log("initApplixirVideoUnit"),startMode=1,invokeApplixirVideoUnit(e)},playApplixirVideoUnit=e=>{e.verbosity>3&&console.log("playApplixirVideoUnit"),startMode=2,invokeApplixirVideoUnit(e)},invokeApplixirVideoUnit=e=>{const t=void 0!==e.yOffs?e.yOffs:-1;if(e.startMode=startMode,2===startMode)return void(startMode=0);e.isMobile=window.mobilecheck(),null!=e.z2url&&null==e.rewarded&&(e.rewarded=!0),e.isMobile&&null!=e.vSizeM&&(e.vSize=e.vSizeM),e.verbosity>3&&3===e.startMode&&console.log("invokeApplixirVideoUnit");let o="max"===e.vSize?0:50;null!=e.htos&&(o+=e.htos);const a=()=>window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,i=()=>window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;let s="max"===e.vSize?0:50;null!=e.vtos&&(s+=e.vtos),void 0===e.vSize&&(e.vSize="640x480"),"max"===e.vSize?(e.targetW=a(),e.targetH=i()):(e.targetW="640"===e.vSize.slice(0,3)?640:"1024x768"===e.vSize?1024:800,e.targetH="640x480"===e.vSize?480:"1024x768"===e.vSize?768:"800x600"===e.vSize?600:360);var r;e.curW=Math.max(e.targetW,a()),e.curH=Math.max(e.targetH,i());return e.pageUrl=window.location.protocol+"//"+window.location.hostname,e.pageUrl.includes("localhost")&&(e.pageUrl=e.pageUrl+":"+window.location.port),e.parentUrl=window.location!=window.parent.location?document.referrer:document.location.href,null!=e.z2url&&window.postMessage("sys-closing","*"),new Promise(((t,o)=>{e.zoneId||o(5);let a=new XMLHttpRequest;a.onerror=function(t){e.verbosity>3&&console.log("Invalid browser status 1: ",t.statusText),o(1)},a.onreadystatechange=function(){4===a.readyState&&(200===a.status?a.responseText.indexOf("foobar")>=0?t():o(4):(e.verbosity>3&&console.log("xhr status: ",a.status),0===a.status?o(2):401===a.status?o(3):o(4)))};try{a.open("GET","https://ssd.appprizes.com/adcentral/openx/www/delivery/foobar.html",!0),a.send()}catch(e){console.log("open/send error"),o(4)}})).then((l=>{let d=document.getElementById("applixir_vanishing_div"),n=document.getElementById("applixir_parent");if(null===n)return void console.log("applixir_parent problem, check Applixir anchor");switch(e.verbosity>2&&console.log("Current page: "+e.pageUrl),null==e.vpos&&(e.vpos="middle"),e.isPortrait=e.curH>=e.curW,e.isMobile&&(e.prebid=!1,null!=e.vposM&&(e.vpos=e.vposM)),n.className="applixir_iframe",d.scrolling="no",d.style.position="absolute",d.style.border="none",d.style.left="-300%",d.style.margin="margin: 0%",d.style.transition="left 1.0s ease",d.style.width="1px",d.style.height="1px",d.removeAttribute("hidden"),n.style.textAlign="center",n.scrolling="no",n.frameBorder="0px",n.style.position="absolute",n.style.left="max"===e.vSize?0:-(e.targetW/2+24)+"px",n.style.width=("max"===e.vSize?e.targetW:e.targetW+24)+"px",n.style.height=("max"===e.vSize?e.targetH:e.targetH+24)+"px",d.style.top=d.style.bottom=n.style.top=n.style.bottom="",e.vpos){case"top":n.style.top=d.style.top="0px";break;case"bottom":n.style.bottom=d.style.bottom="0px";break;default:-1==t?(n.style.verticalAlign="middle",d.style.top=s+"%",n.style.top="max"===e.vSize?0:-e.targetH/2+"px"):(e.verbosity>3&&console.log("Setting yOffset to: "+t),n.style.top="auto",d.style.top=t+"px",n.style.verticalAlign="top")}const p=()=>{(()=>{"max"===e.vSize?(e.targetW=a(),e.targetH=i()):(e.targetW="640"===e.vSize.substr(0,3)?640:"1024x768"===e.vSize?1024:800,e.targetH="640x480"===e.vSize?480:"1024x768"===e.vSize?768:"800x600"===e.vSize?600:360);let t=document.getElementById("applixir_vanishing_div");t.style.position="absolute",r=Math.min(Math.min(a()/e.targetW,i()/e.targetH),1),t.style.transform="scale("+r+")",t.style.transformOrigin="top left",e.verbosity>3&&console.log("resize: "+r)})()};n.addEventListener("resize",p),e.pageUrl.includes("localhost")?n.src="./applixir.iframe.html":n.src="https://cdn.applixir.com/applixir.iframe.html",n.onload=void(e.verbosity>2&&console.log("Document page: "+window.location.protocol+"//"+window.location.hostname));var c=e.pageUrl.includes("localhost")?e.pageUrl:"https://cdn.applixir.com",g=!1;const u=t=>{switch(!1===g&&0==t.data.indexOf("setGParameters")&&(g=!0,e.gName=t.data.substring(15)),t.data){case"applixirIframeReady":(iframeSource=t.source).postMessage("videoOptionsDataSet="+JSON.stringify(e),c),1===startMode&&(void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("ad-initready"),startInterval=setInterval((()=>{0===startMode&&(clearInterval(startInterval),iframeSource.postMessage("initApplixirAd",c))}),250));break;case"videoInitialized":googletag=window.googletag||{cmd:[]},d.style.left=o+"%",p(),e.verbosity>3&&console.log("positioning: "+d.style.left+" "+d.style.top+" "+n.offsetTop+" "+r+" "+n.style.width+" "+n.style.height+" "+n.style.left+" "+a()+" "+i()+" "+e.curW+" "+e.curH+" "+e.targetW+" "+e.targetH),null!=e.nopers&&googletag&&googletag.apiReady&&googletag.cmd.push((function(){googletag.pubads().setPrivacySettings({nonPersonalizedAds:e.nopers})})),null!=e.nodata&&googletag&&googletag.apiReady&&googletag.cmd.push((function(){googletag.pubads().setPrivacySettings({restrictDataProcessing:e.nodata})})),/^([0-9a-zA-Z]{32,150})$|^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/.test(e.userId)?(e.verbosity>3&&console.log("Setting ppid to current options.userId"),e.ppid=e.userId):(e.verbosity>0&&console.log("Value in options.userId not a valid UUID. Setting ppid to new UUIDv4"),e.ppid=URL.createObjectURL(new Blob).slice(-36)),!0===e.rewarded?(e.verbosity>4&&console.log("Settings2: "+JSON.stringify(e)),googletag&&googletag.apiReady?googletag.cmd.push((function(){(rewardedSlot=googletag.defineOutOfPageSlot(e.gName,googletag.enums.OutOfPageFormat.REWARDED))?(rewardedSlotClosed=!1,rewardedSlot.addService(googletag.pubads()),googletag.pubads().setPublisherProvidedId(e.ppid),googletag.pubads().set("page_url",e.pageUrl),googletag.pubads().addEventListener("rewardedSlotReady",(function(t){e.verbosity>4&&console.log("rewardedSlotReady Event: "+JSON.stringify(t)),t.makeRewardedVisible(),googletag.pubads().removeEventListener("rewardedSlotReady",arguments.callee)})),googletag.pubads().addEventListener("slotRenderEnded",(function(t){e.verbosity>4&&console.log("slotRenderEnded Event: "+JSON.stringify(t)),t.isEmpty&&(e.verbosity>2&&console.log("Rewarded ad did not fill, calling IMA fallback"),iframeSource.postMessage("displayApplixirAd",c)),googletag.pubads().removeEventListener("slotRenderEnded",arguments.callee)})),googletag.pubads().addEventListener("rewardedSlotGranted",(function(t){rewardComplete=!0,e.verbosity>4&&console.log("rewardedSlotGranted Event: "+JSON.stringify(t)),postMessage("videoWatched",e.pageUrl),rewardedSlotClosed||(googletag.destroySlots([rewardedSlot]),rewardedSlotClosed=!0),null!=e.accountId||null!=e.devId?iframeSource.postMessage("callRMSendpoint",c):iframeSource.postMessage("closeGPTplayer",c),googletag.pubads().removeEventListener("rewardedSlotGranted",arguments.callee)})),googletag.pubads().addEventListener("rewardedSlotClosed",(function(t){e.verbosity>4&&console.log("rewardedSlotClosed Event: "+JSON.stringify(t)),rewardComplete||postMessage("videoNotWatched",e.pageUrl),rewardedSlotClosed||(googletag.destroySlots([rewardedSlot]),rewardedSlotClosed=!0),null!=e.accountId||null!=e.devId?iframeSource.postMessage("callRMSendpoint",c):iframeSource.postMessage("closeGPTplayer",c),googletag.pubads().removeEventListener("rewardedSlotClosed",arguments.callee)})),googletag.enableServices(),googletag.display(rewardedSlot)):(e.verbosity>3&&console.log("rewardedSlot failed, running IMA fallback"),iframeSource.postMessage("displayApplixirAd",c))})):(e.verbosity>0&&console.log("Google GPT library load failed, running IMA fallback"),iframeSource.postMessage("displayApplixirAd",c))):iframeSource.postMessage("displayApplixirAd",c);break;case"videoInitReady":1===startMode&&void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("ad-ready");break;case"videoStarted":void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("ad-started");break;case"fallbackStarted":void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("fb-started");break;case"videoWatched":void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("ad-watched");break;case"rewardGranted":void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("ad-rewarded");break;case"rewardRejected":void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("ad-rejected");break;case"rewardMaxed":void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("ad-maximum");break;case"rewardViolation":void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("ad-violation");break;case"videoNotWatched":void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("ad-interrupted");break;case"videoNotFound":void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("ads-unavailable");break;case"videoFallbackBanner":case"fallbackWatched":void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("fb-watched");break;case"closeApplixirPlayer":(e=>{e.style.left="-300%"})(document.getElementById("applixir_vanishing_div")),window.removeEventListener("resize",p),window.removeEventListener("message",u,!1),void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&e.adStatusCb("sys-closing")}};window.addEventListener("message",u,!1)})).catch((t=>{console.log("Applixir load error:",t);let o=t<3?"ad-blocker":3==t?"cors-error":4==t?"network-error":"no-zoneId";void 0!==e.adStatusCb&&"function"==typeof e.adStatusCb&&(e.adStatusCb(o),window.postMessage("closeApplixirPlayer",e.pageUrl))}))};window.mobilecheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},window.initApplixirVideoUnit=initApplixirVideoUnit,window.playApplixirVideoUnit=playApplixirVideoUnit,window.invokeApplixirVideoUnit=invokeApplixirVideoUnit;